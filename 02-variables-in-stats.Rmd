---
title: "Data in Statistics"
author: 郭耀仁 Yao-Jen Kuo
date: "`r Sys.Date()`"
output:
  revealjs::revealjs_presentation:
    theme: night
    highlight: zenburn
    center: true
    reveal_options:
      self_contained: true
      previewLinks: true
      slideNumber: true
---

## Agenda

- Univariate data
- Bivariate data
- Multivariate data

# Univariate data

## What is univariate data

A univariate data set is a set of measurements for some variable from a collection of cases.

$$
x_1, x_2, ..., x_n
$$

## How do we use R for univariate data

Vector.

## Getting a vector with real-world data

```{r message=FALSE}
library(quantmod)

getSymbols(Symbols = "VTI", from = "2018-01-01") # create a VTI xts object in global environment
close_price_vector <- as.vector(coredata(VTI$VTI.Close)) # extract close prices as a vector
class(close_price_vector)
```

## Summaries of a numeric vector

- Center
- Spread
- Shape

## Center: using `mean()` for sample mean

$$
sample \: mean = \bar{x} = \frac{1}{n}(x_1 + x_2 + ... + x_n) = \frac{1}{n}\sum_i x_i
$$

```{r}
mean(close_price_vector)
```

## Center: using `median()` for sample median

The middle value of the sorted vector.

```{r}
median(close_price_vector)
```

## Center: using `quantile()` for a generalized version of `median()`

```{r}
quantile(close_price_vector)
```

## Spread: using `range()` for the difference between the smallest and largest values

```{r}
range(close_price_vector)
diff(range(close_price_vector))
```

## Spread: using `IQR` for interquantile range

While range is an obvious measure of spread, but that it suffers from being effected by just one large or small value.

```{r}
IQR(close_price_vector)
```

## Spread: using `var()` for sample variance

$$
sample \; variance = s^2 = \frac{1}{n-1}\sum_i (x_i - \bar{x})^2
$$

```{r}
var(close_price_vector)
```

## Spread: using `sd()` for sample standard deviation

$$
sample \; standard \; deviation = s = \sqrt{\frac{1}{n-1}\sum_i (x_i - \bar{x})^2}
$$

```{r}
sd(close_price_vector)
```

## Spread: using `scale()` for z-scores

$$
\text{z-scores} = \frac{x_i - \bar{x}}{s}
$$

```{r}
z_scores <- scale(close_price_vector)[,1]
```

## Spread: counting outlier proportion from z-scores

```{r}
outliers <- abs(z_scores) > 2
outlier_proportion <- sum(outliers) / length(z_scores)
outlier_proportion
```

## Shape: measuring sample skewness

$$
sample \; skewness = \frac{1}{n}\sum_i z_i^3
$$

## Shape: there is no built-in function for skewness in R

```{r}
skew <- function(x) {
  n <- length(x)
  z_scores <- scale(x)[,1]
  return(sum(z_scores^3) / n)
}
skew(close_price_vector)
```

## Shape: measuring sample excess kurtosis

$$
sample \; excess \; kurtosis = \frac{1}{n}\sum_i z_i^4 - 3
$$
## Shape: there is no built-in function for excess kurtosis in R

```{r}
kurtosis <- function(x) {
  n <- length(x)
  z_scores <- scale(x)[,1]
  return(sum(z_scores^4) / n - 3)
}
kurtosis(close_price_vector)
```

## Shape: using histogram to view the shape of univariate data

```{r}
hist(close_price_vector, breaks = 30)
```

## Shape: using density plot to view the shape of univariate data

```{r}
plot(density(close_price_vector))
```

## Shape: the combination of histogram and density plot

```{r}
dens <- density(close_price_vector)
hist(close_price_vector, probability = TRUE, breaks = 30)
lines(dens)
```

## Shape: other plots to observe the shape of univarite data

- Box plot via `boxplot()` function
- Quantile plot via `qqnorm()` function

# Bivariate data

## What is bivariate data

A bivariate data set is a set of measurements for some variable from a collection of cases involving two attributes.

$$
x_1, x_2, ..., x_n \\
y_1, y_2, ..., y_n
$$

## How do we use R for bivariate data

Specifying 2 vectors.

## Getting 2 vectors with real-world data

```{r message=FALSE}
start_date <- "2018-01-01"
getSymbols(Symbols = "VTI", from = start_date) # create a VTI xts object in global environment
getSymbols(Symbols = "AMZN", from = start_date) # create a AMZN xts object in global environment
vti_close_vector <- as.vector(coredata(VTI$VTI.Close))
amzn_close_vector <- as.vector(coredata(AMZN$AMZN.Close))
```

## Using list for 2 vectors

```{r}
vti_and_amzn <- list(
  vti = vti_close_vector,
  amzn = amzn_close_vector
)
```

## Using data.frame for 2 vectors

```{r}
vti_and_amzn <- data.frame(
  trading_date = index(VTI),
  vti = vti_close_vector,
  amzn = amzn_close_vector
)
```

## For bivariate data, we ask about relationships.

Using scatter to view the relationship of bivariate data.

```{r}
plot(vti_close_vector, amzn_close_vector)
```

## Using `cov()` for covariance

$$
cov(x, y) = \frac{1}{n-1}\sum(x_i - \bar{x})(y_i - \bar{y})
$$

```{r}
cov(vti_close_vector, amzn_close_vector)
```

## Using `cor()` for correlation

$$
cor(x, y) = \frac{cov(x, y)}{s_x s_y}
$$

```{r}
cor(vti_close_vector, amzn_close_vector)
```

# Multivariate data

## How do we use R for multivariate data

